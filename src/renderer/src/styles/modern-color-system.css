/**
 * 现代化色彩设计系统 - Modern Color Design System
 * 
 * 设计理念：
 * 1. 简约现代 - 受Claude.ai和Grok.com启发
 * 2. 高对比度 - 确保可访问性
 * 3. 舒缓色调 - 减少眼部疲劳
 * 4. 品牌一致 - 统一的视觉语言
 */

/* ============== 全局设计令牌重定义 ============== */
:root {
  /* === 主色调系统 - 现代蓝紫渐变 === */
  --primary-50: 240 249 255; /* 极浅蓝 */
  --primary-100: 224 242 254; /* 浅蓝 */
  --primary-200: 186 230 253; /* 蓝白 */
  --primary-300: 125 211 252; /* 亮蓝 */
  --primary-400: 56 189 248; /* 标准蓝 */
  --primary-500: 14 165 233; /* 主蓝色 */
  --primary-600: 2 132 199; /* 深蓝 */
  --primary-700: 3 105 161; /* 更深蓝 */
  --primary-800: 7 89 133; /* 海军蓝 */
  --primary-900: 12 74 110; /* 最深蓝 */

  /* === 中性色系统 - 温暖灰调 === */
  --neutral-50: 249 250 251; /* 接近白色 */
  --neutral-100: 243 244 246; /* 极浅灰 */
  --neutral-200: 229 231 235; /* 浅灰 */
  --neutral-300: 209 213 219; /* 中浅灰 */
  --neutral-400: 156 163 175; /* 中灰 */
  --neutral-500: 107 114 128; /* 标准灰 */
  --neutral-600: 75 85 99; /* 深灰 */
  --neutral-700: 55 65 81; /* 更深灰 */
  --neutral-800: 31 41 55; /* 炭灰色 */
  --neutral-900: 15 23 42; /* 最深灰 */

  /* === 功能色系统 === */
  --success-50: 236 253 245;
  --success-500: 16 185 129; /* 成功绿 */
  --success-700: 4 120 87;

  --warning-50: 255 251 235;
  --warning-500: 245 158 11; /* 警告橙 */
  --warning-700: 180 83 9;

  --error-50: 254 242 242;
  --error-500: 239 68 68; /* 错误红 */
  --error-700: 185 28 28;

  /* === 主题变量重新定义 === */
  --background: var(--neutral-50);
  --foreground: var(--neutral-900);

  --card: 255 255 255; /* 纯白卡片 */
  --card-foreground: var(--neutral-900);

  --popover: 255 255 255;
  --popover-foreground: var(--neutral-900);

  --primary: var(--primary-600);
  --primary-foreground: 255 255 255;

  --secondary: var(--neutral-100);
  --secondary-foreground: var(--neutral-700);

  --muted: var(--neutral-100);
  --muted-foreground: var(--neutral-500);

  --accent: var(--primary-50);
  --accent-foreground: var(--primary-700);

  --destructive: var(--error-500);
  --destructive-foreground: 255 255 255;

  --border: var(--neutral-200);
  --input: var(--neutral-200);
  --ring: var(--primary-500);

  /* === 新增设计令牌 === */
  --surface-elevated: 255 255 255; /* 悬浮表面 */
  --surface-hover: var(--neutral-50); /* 悬停表面 */
  --surface-pressed: var(--neutral-100); /* 按压表面 */

  --text-primary: var(--neutral-900); /* 主要文本 */
  --text-secondary: var(--neutral-600); /* 次要文本 */
  --text-tertiary: var(--neutral-400); /* 第三级文本 */
  --text-disabled: var(--neutral-300); /* 禁用文本 */

  --icon-primary: var(--neutral-700); /* 主要图标 */
  --icon-secondary: var(--neutral-500); /* 次要图标 */
  --icon-tertiary: var(--neutral-400); /* 第三级图标 */

  --divider: var(--neutral-200); /* 分割线 */
  --divider-strong: var(--neutral-300); /* 强分割线 */

  /* === 交互状态颜色 === */
  --interactive-hover: var(--primary-50);
  --interactive-active: var(--primary-100);
  --interactive-disabled: var(--neutral-100);

  /* === 品牌渐变 === */
  --gradient-primary: linear-gradient(
    135deg,
    hsl(var(--primary-500)) 0%,
    hsl(var(--primary-600)) 100%
  );

  --gradient-hero: linear-gradient(
    135deg,
    hsl(var(--primary-400)) 0%,
    hsl(var(--primary-600)) 50%,
    hsl(var(--primary-700)) 100%
  );

  --gradient-subtle: linear-gradient(
    135deg,
    hsl(var(--primary-50)) 0%,
    hsl(var(--primary-100)) 100%
  );
}

/* ============== 深色主题优化 ============== */
.dark {
  /* === 深色背景系统 === */
  --background: 8 8 16; /* 深蓝黑 */
  --foreground: var(--neutral-100);

  --card: 15 16 28; /* 深色卡片 */
  --card-foreground: var(--neutral-100);

  --popover: 15 16 28;
  --popover-foreground: var(--neutral-100);

  --primary: var(--primary-400);
  --primary-foreground: var(--neutral-900);

  --secondary: 20 21 35; /* 深色次要背景 */
  --secondary-foreground: var(--neutral-300);

  --muted: 20 21 35;
  --muted-foreground: var(--neutral-400);

  --accent: 20 21 35;
  --accent-foreground: var(--primary-400);

  --destructive: var(--error-500);
  --destructive-foreground: var(--neutral-100);

  --border: 35 39 57; /* 深色边框 */
  --input: 35 39 57;
  --ring: var(--primary-400);

  /* === 深色模式新增令牌 === */
  --surface-elevated: 22 24 40; /* 深色悬浮表面 */
  --surface-hover: 25 27 43; /* 深色悬停 */
  --surface-pressed: 30 33 48; /* 深色按压 */

  --text-primary: var(--neutral-100); /* 深色主文本 */
  --text-secondary: var(--neutral-300); /* 深色次文本 */
  --text-tertiary: var(--neutral-500); /* 深色第三文本 */
  --text-disabled: var(--neutral-600); /* 深色禁用文本 */

  --icon-primary: var(--neutral-300); /* 深色主图标 */
  --icon-secondary: var(--neutral-400); /* 深色次图标 */
  --icon-tertiary: var(--neutral-500); /* 深色第三图标 */

  --divider: 35 39 57; /* 深色分割线 */
  --divider-strong: 50 56 73; /* 深色强分割线 */

  --interactive-hover: 25 30 50; /* 深色交互悬停 */
  --interactive-active: 30 35 55; /* 深色交互激活 */
  --interactive-disabled: 20 21 35; /* 深色交互禁用 */

  /* === 深色模式渐变 === */
  --gradient-primary: linear-gradient(
    135deg,
    hsl(var(--primary-400)) 0%,
    hsl(var(--primary-500)) 100%
  );

  --gradient-hero: linear-gradient(
    135deg,
    hsl(var(--primary-400)) 0%,
    hsl(var(--primary-500)) 50%,
    hsl(var(--primary-600)) 100%
  );

  --gradient-subtle: linear-gradient(
    135deg,
    rgba(var(--primary-400), 0.1) 0%,
    rgba(var(--primary-500), 0.05) 100%
  );
}

/* ============== 现代UI组件样式 ============== */

/* === 聊天消息优化 === */
.message-bubble {
  background: hsl(var(--card)) !important;
  border: 1px solid hsl(var(--divider)) !important;
  color: hsl(var(--text-primary)) !important;
  box-shadow:
    0 1px 3px 0 rgba(0, 0, 0, 0.1),
    0 1px 2px 0 rgba(0, 0, 0, 0.06) !important;

  transition: all 0.2s ease !important;
}

.message-bubble:hover {
  background: hsl(var(--surface-hover)) !important;
  border-color: hsl(var(--border)) !important;
  transform: translateY(-1px) !important;
  box-shadow:
    0 4px 6px -1px rgba(0, 0, 0, 0.1),
    0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
}

.message-bubble.user {
  background: var(--gradient-primary) !important;
  color: white !important;
  border: none !important;
}

.message-bubble.assistant {
  background: hsl(var(--surface-elevated)) !important;
  border-color: hsl(var(--divider)) !important;
}

/* === 侧边栏现代化增强 === */
.sidebar {
  background: linear-gradient(
    to bottom,
    hsl(var(--background)) 0%,
    hsl(var(--background) / 0.98) 100%
  ) !important;
  border-right: 1px solid hsl(var(--divider) / 0.8) !important;
  backdrop-filter: blur(12px) !important;

  /* 增强层次感 */
  box-shadow:
    inset -1px 0 0 hsl(var(--border) / 0.3),
    2px 0 12px rgba(0, 0, 0, 0.06) !important;
}

.sidebar-header {
  background: hsl(var(--surface-elevated) / 0.95) !important;
  border-bottom: 1px solid hsl(var(--divider) / 0.6) !important;
  padding: 24px 20px !important;

  /* 增加层次阴影 */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04) !important;
}

.sidebar-header h1 {
  color: hsl(var(--text-primary)) !important;
  font-weight: 700 !important;
  font-size: 20px !important;
  letter-spacing: -0.01em !important;
}

/* === 聊天项目优化增强 === */
.chat-item {
  border-radius: 12px !important;
  padding: 14px 16px !important;
  margin: 3px 8px !important;
  background: transparent !important;
  border: 1px solid transparent !important;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
  min-height: 72px !important;
}

.chat-item:hover {
  background: hsl(var(--surface-hover) / 0.8) !important;
  border-color: hsl(var(--border) / 0.5) !important;
  transform: translateX(4px) translateY(-1px) !important;
  box-shadow:
    0 2px 8px rgba(0, 0, 0, 0.06),
    0 1px 3px rgba(0, 0, 0, 0.04) !important;
}

.chat-item.active {
  background: linear-gradient(
    135deg,
    hsl(var(--primary-50)) 0%,
    hsl(var(--primary-100) / 0.8) 100%
  ) !important;
  border-color: hsl(var(--primary-300) / 0.6) !important;
  color: hsl(var(--primary-700)) !important;

  /* 增强激活状态 */
  box-shadow:
    0 3px 12px rgba(var(--primary-500), 0.15),
    inset 0 1px 0 hsl(var(--primary-200) / 0.5) !important;

  transform: translateX(6px) !important;
  border-left: 3px solid hsl(var(--primary-500)) !important;
}

.chat-item h3 {
  color: hsl(var(--text-primary)) !important;
  font-weight: 600 !important;
  font-size: 14px !important;
  line-height: 1.4 !important;
}

.chat-item.active h3 {
  color: hsl(var(--primary-700)) !important;
  font-weight: 650 !important;
}

.chat-item p {
  color: hsl(var(--text-secondary) / 0.95) !important;
  font-size: 13px !important;
  line-height: 1.45 !important;
}

.chat-item.active p {
  color: hsl(var(--primary-600) / 0.85) !important;
}

/* === 顶部栏现代化 === */
.chat-header {
  background: hsl(var(--surface-elevated) / 0.95) !important;
  backdrop-filter: blur(20px) !important;
  border-bottom: 1px solid hsl(var(--divider)) !important;
  box-shadow:
    0 1px 3px 0 rgba(0, 0, 0, 0.1),
    0 1px 2px 0 rgba(0, 0, 0, 0.06) !important;
}

.chat-title {
  color: hsl(var(--text-primary)) !important;
  font-weight: 600 !important;
}

.status-info {
  color: hsl(var(--text-secondary)) !important;
}

/* === 输入区域优化 === */
.input-area {
  background: hsl(var(--surface-elevated) / 0.95) !important;
  backdrop-filter: blur(20px) !important;
  border-top: 1px solid hsl(var(--divider)) !important;
}

.input-container {
  background: hsl(var(--card)) !important;
  border: 1px solid hsl(var(--divider)) !important;
  box-shadow:
    0 4px 6px -1px rgba(0, 0, 0, 0.1),
    0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
  transition: all 0.2s ease !important;
}

.input-container:focus-within {
  border-color: hsl(var(--primary-500)) !important;
  box-shadow:
    0 0 0 3px hsl(var(--primary-500) / 0.1),
    0 4px 6px -1px rgba(0, 0, 0, 0.1) !important;
  transform: translateY(-1px) !important;
}

.input-container textarea {
  color: hsl(var(--text-primary)) !important;
  background: transparent !important;
}

.input-container textarea::placeholder {
  color: hsl(var(--text-tertiary)) !important;
}

/* === 按钮系统现代化 === */
.btn-primary {
  background: var(--gradient-primary) !important;
  color: white !important;
  border: none !important;
  box-shadow:
    0 4px 6px -1px rgba(var(--primary-500), 0.3),
    0 2px 4px -1px rgba(var(--primary-500), 0.06) !important;
  transition: all 0.2s ease !important;
}

.btn-primary:hover {
  transform: translateY(-2px) !important;
  box-shadow:
    0 8px 25px -5px rgba(var(--primary-500), 0.4),
    0 10px 10px -5px rgba(var(--primary-500), 0.04) !important;
}

.btn-secondary {
  background: hsl(var(--surface-elevated)) !important;
  color: hsl(var(--text-primary)) !important;
  border: 1px solid hsl(var(--divider)) !important;
  transition: all 0.2s ease !important;
}

.btn-secondary:hover {
  background: hsl(var(--surface-hover)) !important;
  border-color: hsl(var(--border)) !important;
  transform: translateY(-1px) !important;
}

/* === 图标优化 === */
.icon-primary {
  color: hsl(var(--icon-primary)) !important;
}

.icon-secondary {
  color: hsl(var(--icon-secondary)) !important;
}

.icon-button {
  padding: 8px !important;
  border-radius: 8px !important;
  background: transparent !important;
  transition: all 0.2s ease !important;
}

.icon-button:hover {
  background: hsl(var(--surface-hover)) !important;
  transform: scale(1.05) !important;
}

.icon-button:active {
  transform: scale(0.95) !important;
  background: hsl(var(--surface-pressed)) !important;
}

/* === 分割线优化 === */
.divider {
  border-color: hsl(var(--divider)) !important;
}

.divider-strong {
  border-color: hsl(var(--divider-strong)) !important;
}

/* === 滚动条现代化 === */
::-webkit-scrollbar {
  width: 6px !important;
  height: 6px !important;
}

::-webkit-scrollbar-track {
  background: hsl(var(--background)) !important;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--border)) !important;
  border-radius: 3px !important;
  transition: background 0.2s ease !important;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--text-tertiary)) !important;
}

/* === 动画和过渡优化 === */
.smooth-transition {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

.fade-in {
  animation: fadeIn 0.3s ease-out !important;
}

.slide-up {
  animation: slideUp 0.3s ease-out !important;
}

.scale-in {
  animation: scaleIn 0.2s ease-out !important;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* === 响应式适配 === */
@media (max-width: 768px) {
  .message-bubble {
    margin: 8px 12px !important;
  }

  .chat-item {
    margin: 4px 6px !important;
    padding: 10px 12px !important;
  }

  .sidebar-header {
    padding: 16px !important;
  }
}

/* === 无障碍优化 === */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* === 高对比度模式 === */
@media (prefers-contrast: high) {
  .message-bubble {
    border-width: 2px !important;
  }

  .input-container {
    border-width: 2px !important;
  }

  .chat-item.active {
    border-width: 2px !important;
  }
}
