/**
 * 现代化增强配色系统 - Modern Enhanced Color System
 * 
 * 基于UX专家和微交互专家的建议重新设计：
 * 1. 改善色彩层次和视觉引导
 * 2. 增强对比度确保可访问性
 * 3. 统一品牌色彩语言
 * 4. 支持深色模式和高对比度
 */

/* ============== 核心色彩定义 ============== */

:root {
  /* === 品牌主色调 === */
  --brand-primary-50: 240 245 255; /* 极浅蓝 */
  --brand-primary-100: 224 235 255; /* 浅蓝 */
  --brand-primary-200: 199 220 255; /* 淡蓝 */
  --brand-primary-300: 147 197 253; /* 中浅蓝 */
  --brand-primary-400: 96 165 250; /* 标准蓝 */
  --brand-primary-500: 59 130 246; /* 主品牌色 */
  --brand-primary-600: 37 99 235; /* 深蓝 */
  --brand-primary-700: 29 78 216; /* 很深蓝 */
  --brand-primary-800: 30 58 138; /* 极深蓝 */
  --brand-primary-900: 23 37 84; /* 最深蓝 */

  /* === 中性色阶 (更加精细化) === */
  --neutral-0: 255 255 255; /* 纯白 */
  --neutral-25: 253 254 255; /* 微蓝白 */
  --neutral-50: 248 250 252; /* 极浅灰 */
  --neutral-75: 242 245 249; /* 浅灰 */
  --neutral-100: 236 240 247; /* 淡灰 */
  --neutral-150: 226 232 240; /* 中淡灰 */
  --neutral-200: 203 213 225; /* 标准浅灰 */
  --neutral-300: 148 163 184; /* 中灰 */
  --neutral-400: 100 116 139; /* 中深灰 */
  --neutral-500: 71 85 105; /* 深灰 */
  --neutral-600: 51 65 85; /* 很深灰 */
  --neutral-700: 30 41 59; /* 极深灰 */
  --neutral-800: 15 23 42; /* 深蓝灰 */
  --neutral-900: 2 6 23; /* 最深蓝灰 */
  --neutral-950: 1 4 14; /* 接近黑色 */

  /* === 功能色彩 === */
  /* 成功色 (绿色系) */
  --success-50: 240 253 244;
  --success-100: 220 252 231;
  --success-200: 187 247 208;
  --success-300: 134 239 172;
  --success-400: 74 222 128;
  --success-500: 34 197 94; /* 主成功色 */
  --success-600: 22 163 74;
  --success-700: 21 128 61;
  --success-800: 22 101 52;
  --success-900: 20 83 45;

  /* 警告色 (橙色系) */
  --warning-50: 255 251 235;
  --warning-100: 254 243 199;
  --warning-200: 253 230 138;
  --warning-300: 252 211 77;
  --warning-400: 251 191 36;
  --warning-500: 245 158 11; /* 主警告色 */
  --warning-600: 217 119 6;
  --warning-700: 180 83 9;
  --warning-800: 146 64 14;
  --warning-900: 120 53 15;

  /* 错误色 (红色系) */
  --error-50: 254 242 242;
  --error-100: 254 226 226;
  --error-200: 254 202 202;
  --error-300: 252 165 165;
  --error-400: 248 113 113;
  --error-500: 239 68 68; /* 主错误色 */
  --error-600: 220 38 38;
  --error-700: 185 28 28;
  --error-800: 153 27 27;
  --error-900: 127 29 29;

  /* 信息色 (蓝色系) */
  --info-50: 240 249 255;
  --info-100: 224 242 254;
  --info-200: 186 230 253;
  --info-300: 125 211 252;
  --info-400: 56 189 248;
  --info-500: 14 165 233; /* 主信息色 */
  --info-600: 2 132 199;
  --info-700: 3 105 161;
  --info-800: 7 89 133;
  --info-900: 12 74 110;
}

/* ============== 语义化色彩令牌 ============== */

:root {
  /* === 文本颜色 === */
  --text-primary: var(--neutral-900); /* 主要文本 */
  --text-secondary: var(--neutral-600); /* 次要文本 */
  --text-tertiary: var(--neutral-400); /* 第三级文本 */
  --text-placeholder: var(--neutral-300); /* 占位符文本 */
  --text-disabled: var(--neutral-200); /* 禁用文本 */
  --text-inverse: var(--neutral-0); /* 反色文本 */
  --text-success: var(--success-700); /* 成功文本 */
  --text-warning: var(--warning-700); /* 警告文本 */
  --text-error: var(--error-600); /* 错误文本 */
  --text-info: var(--info-700); /* 信息文本 */
  --text-brand: var(--brand-primary-600); /* 品牌色文本 */

  /* === 背景颜色 === */
  --bg-canvas: var(--neutral-0); /* 画布背景 */
  --bg-surface: var(--neutral-25); /* 表面背景 */
  --bg-overlay: var(--neutral-50); /* 遮罩背景 */
  --bg-subtle: var(--neutral-75); /* 微妙背景 */
  --bg-muted: var(--neutral-100); /* 静音背景 */
  --bg-emphasis: var(--neutral-150); /* 强调背景 */
  --bg-inverse: var(--neutral-900); /* 反色背景 */
  --bg-brand: var(--brand-primary-500); /* 品牌背景 */
  --bg-brand-subtle: var(--brand-primary-50); /* 品牌微妙背景 */
  --bg-success: var(--success-500); /* 成功背景 */
  --bg-success-subtle: var(--success-50); /* 成功微妙背景 */
  --bg-warning: var(--warning-500); /* 警告背景 */
  --bg-warning-subtle: var(--warning-50); /* 警告微妙背景 */
  --bg-error: var(--error-500); /* 错误背景 */
  --bg-error-subtle: var(--error-50); /* 错误微妙背景 */
  --bg-info: var(--info-500); /* 信息背景 */
  --bg-info-subtle: var(--info-50); /* 信息微妙背景 */

  /* === 交互状态颜色 === */
  --interactive-default: var(--neutral-100); /* 默认交互 */
  --interactive-hover: var(--neutral-150); /* 悬停状态 */
  --interactive-active: var(--neutral-200); /* 激活状态 */
  --interactive-focus: var(--brand-primary-500); /* 焦点状态 */
  --interactive-disabled: var(--neutral-75); /* 禁用状态 */

  /* === 边框颜色 === */
  --border-default: var(--neutral-200); /* 默认边框 */
  --border-muted: var(--neutral-150); /* 静音边框 */
  --border-subtle: var(--neutral-100); /* 微妙边框 */
  --border-strong: var(--neutral-300); /* 强边框 */
  --border-inverse: var(--neutral-0); /* 反色边框 */
  --border-brand: var(--brand-primary-300); /* 品牌边框 */
  --border-success: var(--success-300); /* 成功边框 */
  --border-warning: var(--warning-300); /* 警告边框 */
  --border-error: var(--error-300); /* 错误边框 */
  --border-info: var(--info-300); /* 信息边框 */
  --border-focus: var(--brand-primary-500); /* 焦点边框 */

  /* === 阴影颜色 === */
  --shadow-color-light: 0 0 0; /* 浅色阴影 */
  --shadow-color-medium: var(--neutral-400); /* 中等阴影 */
  --shadow-color-strong: var(--neutral-600); /* 强阴影 */
  --shadow-color-brand: var(--brand-primary-500); /* 品牌阴影 */

  /* === 阴影样式 === */
  --shadow-xs: 0 1px 2px 0 hsl(var(--shadow-color-light) / 0.05);
  --shadow-sm:
    0 1px 3px 0 hsl(var(--shadow-color-light) / 0.1),
    0 1px 2px -1px hsl(var(--shadow-color-light) / 0.1);
  --shadow-md:
    0 4px 6px -1px hsl(var(--shadow-color-light) / 0.1),
    0 2px 4px -2px hsl(var(--shadow-color-light) / 0.1);
  --shadow-lg:
    0 10px 15px -3px hsl(var(--shadow-color-light) / 0.1),
    0 4px 6px -4px hsl(var(--shadow-color-light) / 0.1);
  --shadow-xl:
    0 20px 25px -5px hsl(var(--shadow-color-light) / 0.1),
    0 8px 10px -6px hsl(var(--shadow-color-light) / 0.1);
  --shadow-2xl: 0 25px 50px -12px hsl(var(--shadow-color-light) / 0.25);
  --shadow-focus: 0 0 0 3px hsl(var(--brand-primary-500) / 0.12);
  --shadow-brand: 0 4px 14px 0 hsl(var(--brand-primary-500) / 0.15);
}

/* ============== 深色模式配色 ============== */

.dark {
  /* === 文本颜色 (深色模式) === */
  --text-primary: var(--neutral-50); /* 主要文本 */
  --text-secondary: var(--neutral-300); /* 次要文本 */
  --text-tertiary: var(--neutral-400); /* 第三级文本 */
  --text-placeholder: var(--neutral-500); /* 占位符文本 */
  --text-disabled: var(--neutral-600); /* 禁用文本 */
  --text-inverse: var(--neutral-900); /* 反色文本 */
  --text-success: var(--success-300); /* 成功文本 */
  --text-warning: var(--warning-300); /* 警告文本 */
  --text-error: var(--error-300); /* 错误文本 */
  --text-info: var(--info-300); /* 信息文本 */
  --text-brand: var(--brand-primary-300); /* 品牌色文本 */

  /* === 背景颜色 (深色模式) === */
  --bg-canvas: var(--neutral-950); /* 画布背景 */
  --bg-surface: var(--neutral-900); /* 表面背景 */
  --bg-overlay: var(--neutral-800); /* 遮罩背景 */
  --bg-subtle: var(--neutral-700); /* 微妙背景 */
  --bg-muted: var(--neutral-600); /* 静音背景 */
  --bg-emphasis: var(--neutral-500); /* 强调背景 */
  --bg-inverse: var(--neutral-50); /* 反色背景 */
  --bg-brand: var(--brand-primary-600); /* 品牌背景 */
  --bg-brand-subtle: var(--brand-primary-900); /* 品牌微妙背景 */
  --bg-success: var(--success-600); /* 成功背景 */
  --bg-success-subtle: var(--success-900); /* 成功微妙背景 */
  --bg-warning: var(--warning-600); /* 警告背景 */
  --bg-warning-subtle: var(--warning-900); /* 警告微妙背景 */
  --bg-error: var(--error-600); /* 错误背景 */
  --bg-error-subtle: var(--error-900); /* 错误微妙背景 */
  --bg-info: var(--info-600); /* 信息背景 */
  --bg-info-subtle: var(--info-900); /* 信息微妙背景 */

  /* === 交互状态颜色 (深色模式) === */
  --interactive-default: var(--neutral-800); /* 默认交互 */
  --interactive-hover: var(--neutral-700); /* 悬停状态 */
  --interactive-active: var(--neutral-600); /* 激活状态 */
  --interactive-focus: var(--brand-primary-400); /* 焦点状态 */
  --interactive-disabled: var(--neutral-800); /* 禁用状态 */

  /* === 边框颜色 (深色模式) === */
  --border-default: var(--neutral-700); /* 默认边框 */
  --border-muted: var(--neutral-800); /* 静音边框 */
  --border-subtle: var(--neutral-850); /* 微妙边框 */
  --border-strong: var(--neutral-600); /* 强边框 */
  --border-inverse: var(--neutral-900); /* 反色边框 */
  --border-brand: var(--brand-primary-700); /* 品牌边框 */
  --border-success: var(--success-700); /* 成功边框 */
  --border-warning: var(--warning-700); /* 警告边框 */
  --border-error: var(--error-700); /* 错误边框 */
  --border-info: var(--info-700); /* 信息边框 */
  --border-focus: var(--brand-primary-400); /* 焦点边框 */

  /* === 阴影样式 (深色模式) === */
  --shadow-color-light: 0 0 0; /* 调整深色模式阴影 */
  --shadow-xs: 0 1px 2px 0 hsl(var(--shadow-color-light) / 0.3);
  --shadow-sm:
    0 1px 3px 0 hsl(var(--shadow-color-light) / 0.4),
    0 1px 2px -1px hsl(var(--shadow-color-light) / 0.4);
  --shadow-md:
    0 4px 6px -1px hsl(var(--shadow-color-light) / 0.4),
    0 2px 4px -2px hsl(var(--shadow-color-light) / 0.4);
  --shadow-lg:
    0 10px 15px -3px hsl(var(--shadow-color-light) / 0.4),
    0 4px 6px -4px hsl(var(--shadow-color-light) / 0.4);
  --shadow-xl:
    0 20px 25px -5px hsl(var(--shadow-color-light) / 0.4),
    0 8px 10px -6px hsl(var(--shadow-color-light) / 0.4);
  --shadow-2xl: 0 25px 50px -12px hsl(var(--shadow-color-light) / 0.6);
  --shadow-focus: 0 0 0 3px hsl(var(--brand-primary-400) / 0.25);
  --shadow-brand: 0 4px 14px 0 hsl(var(--brand-primary-600) / 0.3);
}

/* ============== 高对比度模式 ============== */

@media (prefers-contrast: high) {
  :root {
    --text-primary: var(--neutral-950);
    --text-secondary: var(--neutral-800);
    --border-default: var(--neutral-400);
    --border-focus: var(--brand-primary-700);
    --bg-subtle: var(--neutral-200);
    --interactive-hover: var(--neutral-300);
  }

  .dark {
    --text-primary: var(--neutral-0);
    --text-secondary: var(--neutral-200);
    --border-default: var(--neutral-500);
    --border-focus: var(--brand-primary-300);
    --bg-subtle: var(--neutral-700);
    --interactive-hover: var(--neutral-600);
  }
}

/* ============== 应用到现有CSS变量 ============== */

:root {
  /* 兼容现有变量名 */
  --background: var(--bg-canvas);
  --foreground: var(--text-primary);
  --card: var(--bg-surface);
  --card-foreground: var(--text-primary);
  --popover: var(--bg-overlay);
  --popover-foreground: var(--text-primary);
  --primary: var(--brand-primary-500);
  --primary-foreground: var(--text-inverse);
  --secondary: var(--bg-subtle);
  --secondary-foreground: var(--text-primary);
  --muted: var(--bg-muted);
  --muted-foreground: var(--text-tertiary);
  --accent: var(--bg-subtle);
  --accent-foreground: var(--text-primary);
  --destructive: var(--error-500);
  --destructive-foreground: var(--text-inverse);
  --border: var(--border-default);
  --input: var(--border-default);
  --ring: var(--border-focus);

  /* 表面层次 */
  --surface-elevated: var(--bg-surface);
  --surface-hover: var(--interactive-hover);
  --surface-pressed: var(--interactive-active);
  --surface-selected: var(--bg-brand-subtle);

  /* 分割线 */
  --divider: var(--border-muted);
  --divider-strong: var(--border-strong);

  /* 文本层次 */
  --text-primary: var(--text-primary);
  --text-secondary: var(--text-secondary);
  --text-tertiary: var(--text-tertiary);
  --text-disabled: var(--text-disabled);

  /* 状态色 */
  --success-500: var(--success-500);
  --warning-500: var(--warning-500);
  --error-500: var(--error-500);
  --info-500: var(--info-500);

  /* 主品牌色阶 */
  --primary-300: var(--brand-primary-300);
  --primary-400: var(--brand-primary-400);
  --primary-500: var(--brand-primary-500);
  --primary-600: var(--brand-primary-600);
  --primary-700: var(--brand-primary-700);
}

/* ============== 工具类 ============== */

/* 文本颜色工具类 */
.text-primary {
  color: hsl(var(--text-primary));
}
.text-secondary {
  color: hsl(var(--text-secondary));
}
.text-tertiary {
  color: hsl(var(--text-tertiary));
}
.text-muted {
  color: hsl(var(--text-placeholder));
}
.text-disabled {
  color: hsl(var(--text-disabled));
}
.text-success {
  color: hsl(var(--text-success));
}
.text-warning {
  color: hsl(var(--text-warning));
}
.text-error {
  color: hsl(var(--text-error));
}
.text-info {
  color: hsl(var(--text-info));
}
.text-brand {
  color: hsl(var(--text-brand));
}

/* 背景颜色工具类 */
.bg-surface {
  background-color: hsl(var(--bg-surface));
}
.bg-subtle {
  background-color: hsl(var(--bg-subtle));
}
.bg-muted {
  background-color: hsl(var(--bg-muted));
}
.bg-emphasis {
  background-color: hsl(var(--bg-emphasis));
}
.bg-brand {
  background-color: hsl(var(--bg-brand));
}
.bg-brand-subtle {
  background-color: hsl(var(--bg-brand-subtle));
}
.bg-success {
  background-color: hsl(var(--bg-success));
}
.bg-success-subtle {
  background-color: hsl(var(--bg-success-subtle));
}
.bg-warning {
  background-color: hsl(var(--bg-warning));
}
.bg-warning-subtle {
  background-color: hsl(var(--bg-warning-subtle));
}
.bg-error {
  background-color: hsl(var(--bg-error));
}
.bg-error-subtle {
  background-color: hsl(var(--bg-error-subtle));
}

/* 边框颜色工具类 */
.border-default {
  border-color: hsl(var(--border-default));
}
.border-muted {
  border-color: hsl(var(--border-muted));
}
.border-strong {
  border-color: hsl(var(--border-strong));
}
.border-brand {
  border-color: hsl(var(--border-brand));
}
.border-success {
  border-color: hsl(var(--border-success));
}
.border-warning {
  border-color: hsl(var(--border-warning));
}
.border-error {
  border-color: hsl(var(--border-error));
}

/* 阴影工具类 */
.shadow-xs {
  box-shadow: var(--shadow-xs);
}
.shadow-sm {
  box-shadow: var(--shadow-sm);
}
.shadow-md {
  box-shadow: var(--shadow-md);
}
.shadow-lg {
  box-shadow: var(--shadow-lg);
}
.shadow-xl {
  box-shadow: var(--shadow-xl);
}
.shadow-2xl {
  box-shadow: var(--shadow-2xl);
}
.shadow-focus {
  box-shadow: var(--shadow-focus);
}
.shadow-brand {
  box-shadow: var(--shadow-brand);
}

/* 交互状态工具类 */
.interactive-default {
  background-color: hsl(var(--interactive-default));
}
.interactive-hover:hover {
  background-color: hsl(var(--interactive-hover));
}
.interactive-active:active {
  background-color: hsl(var(--interactive-active));
}

/* ============== 品牌梯度 ============== */

:root {
  /* 品牌渐变 */
  --gradient-primary: linear-gradient(
    135deg,
    hsl(var(--brand-primary-500)) 0%,
    hsl(var(--brand-primary-600)) 100%
  );
  --gradient-primary-hover: linear-gradient(
    135deg,
    hsl(var(--brand-primary-600)) 0%,
    hsl(var(--brand-primary-700)) 100%
  );
  --gradient-brand: linear-gradient(
    135deg,
    hsl(var(--brand-primary-400)) 0%,
    hsl(var(--brand-primary-600)) 50%,
    hsl(var(--brand-primary-700)) 100%
  );
  --gradient-surface: linear-gradient(
    135deg,
    hsl(var(--bg-surface)) 0%,
    hsl(var(--bg-subtle)) 100%
  );
}

/* ============== 色彩无障碍增强 ============== */

/* 确保足够的对比度 */
@media (prefers-contrast: high) {
  :root {
    --text-primary: var(--neutral-950);
    --text-secondary: var(--neutral-800);
    --bg-surface: var(--neutral-0);
    --border-default: var(--neutral-500);
  }

  .dark {
    --text-primary: var(--neutral-0);
    --text-secondary: var(--neutral-100);
    --bg-surface: var(--neutral-950);
    --border-default: var(--neutral-400);
  }
}

/* 色盲友好设计 */
.color-blind-friendly {
  /* 使用图标而非仅依靠颜色 */
  position: relative;
}

.color-blind-friendly.success::before {
  content: '✓';
}
.color-blind-friendly.warning::before {
  content: '⚠';
}
.color-blind-friendly.error::before {
  content: '✗';
}
.color-blind-friendly.info::before {
  content: 'ℹ';
}
