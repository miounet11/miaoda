/**
 * ç²¾ç®€åŠ¨æ•ˆç³»ç»Ÿ - Minimal Animation System
 * 
 * è®¾è®¡åŸåˆ™ï¼š
 * 1. åªä¿ç•™æœ‰æ„ä¹‰çš„åŠ¨æ•ˆ
 * 2. æ³¨é‡åŠŸèƒ½æ€§è€Œéè£…é¥°æ€§
 * 3. æå‡ç”¨æˆ·ä½“éªŒçš„æµç•…åº¦
 * 4. å‡å°‘è®¤çŸ¥è´Ÿæ‹…
 */

/* ============== ç¦ç”¨æ— å…³åŠ¨æ•ˆ ============== */

/* ç§»é™¤æ‰€æœ‰scaleå˜æ¢åŠ¨æ•ˆ */
* {
  --tw-scale-x: 1 !important;
  --tw-scale-y: 1 !important;
}

/* ç¦ç”¨ä¸å¿…è¦çš„transformåŠ¨ç”» */
.animate-pulse,
.animate-spin,
.animate-ping,
.animate-bounce,
.pulse,
.spin,
.ping,
.bounce {
  animation: none !important;
}

/* ç§»é™¤hover scaleæ•ˆæœ */
.hover\:scale-105:hover,
.hover\:scale-110:hover,
.hover\:scale-95:hover,
.group-hover\:scale-105,
.group-hover\:scale-110,
[class*='scale']:hover {
  transform: none !important;
}

/* ç§»é™¤active scaleæ•ˆæœ */
.active\:scale-95:active,
.active\:scale-90:active,
[class*='scale']:active {
  transform: none !important;
}

/* ============== ä¿ç•™æœ‰æ„ä¹‰çš„åŠ¨æ•ˆ ============== */

/* === 1. åŠ è½½æŒ‡ç¤ºå™¨ï¼ˆå¿…è¦çš„åŠŸèƒ½åŠ¨æ•ˆï¼‰=== */
.loading-spinner {
  animation: spin 1s linear infinite !important;
}

.loading-dots {
  animation: loadingDots 1.5s ease-in-out infinite !important;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes loadingDots {
  0%,
  20% {
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  80%,
  100% {
    opacity: 0;
  }
}

/* === 2. çŠ¶æ€åé¦ˆåŠ¨æ•ˆ === */
.feedback-success {
  animation: feedbackFlash 0.6s ease-out !important;
  --feedback-color: hsl(var(--success-500));
}

.feedback-error {
  animation: feedbackFlash 0.6s ease-out !important;
  --feedback-color: hsl(var(--error-500));
}

.feedback-warning {
  animation: feedbackFlash 0.6s ease-out !important;
  --feedback-color: hsl(var(--warning-500));
}

@keyframes feedbackFlash {
  0% {
    background-color: transparent;
    border-color: transparent;
  }
  50% {
    background-color: color-mix(in srgb, var(--feedback-color) 10%, transparent);
    border-color: var(--feedback-color);
  }
  100% {
    background-color: transparent;
    border-color: transparent;
  }
}

/* === 3. é¡µé¢è¿‡æ¸¡åŠ¨æ•ˆï¼ˆæå‡ä½“éªŒï¼‰=== */
.page-transition-enter-active {
  transition: opacity 0.3s ease !important;
}

.page-transition-leave-active {
  transition: opacity 0.2s ease !important;
}

.page-transition-enter-from,
.page-transition-leave-to {
  opacity: 0 !important;
}

/* === 4. æ¨¡æ€æ¡†åŠ¨æ•ˆï¼ˆç”¨æˆ·é¢„æœŸï¼‰=== */
.modal-transition-enter-active {
  transition: all 0.3s ease !important;
}

.modal-transition-leave-active {
  transition: all 0.2s ease !important;
}

.modal-transition-enter-from {
  opacity: 0 !important;
  transform: translateY(-20px) !important;
}

.modal-transition-leave-to {
  opacity: 0 !important;
  transform: translateY(-10px) !important;
}

.modal-backdrop-enter-active,
.modal-backdrop-leave-active {
  transition: opacity 0.3s ease !important;
}

.modal-backdrop-enter-from,
.modal-backdrop-leave-to {
  opacity: 0 !important;
}

/* === 5. æ¶ˆæ¯å‡ºç°åŠ¨æ•ˆï¼ˆå†…å®¹ç›¸å…³ï¼‰=== */
.message-appear {
  animation: messageAppear 0.4s ease-out !important;
}

@keyframes messageAppear {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* === 6. æŒ‰é’®äº¤äº’åé¦ˆï¼ˆåŠŸèƒ½å¿…éœ€ï¼‰=== */
.btn-feedback:active {
  transform: translateY(1px) !important;
  transition: transform 0.1s ease !important;
}

.btn-primary:active,
.btn-secondary:active {
  transform: translateY(1px) !important;
}

/* === 7. ç„¦ç‚¹çŠ¶æ€åŠ¨æ•ˆï¼ˆæ— éšœç¢å¿…éœ€ï¼‰=== */
.focus-ring:focus,
.focus-ring:focus-visible {
  outline: 2px solid hsl(var(--primary-500)) !important;
  outline-offset: 2px !important;
  transition: outline-color 0.2s ease !important;
}

/* === 8. æ‚¬åœçŠ¶æ€ä¼˜åŒ–ï¼ˆå‡å°‘å¹²æ‰°ï¼‰=== */
.hover-lift:hover {
  transform: translateY(-2px) !important;
  transition: transform 0.2s ease !important;
}

.hover-highlight:hover {
  background-color: hsl(var(--surface-hover)) !important;
  transition: background-color 0.2s ease !important;
}

.hover-border:hover {
  border-color: hsl(var(--border)) !important;
  transition: border-color 0.2s ease !important;
}

/* ============== æ€§èƒ½ä¼˜åŒ–åŠ¨æ•ˆ ============== */

/* åªä¸ºå…³é”®å…ƒç´ å¯ç”¨GPUåŠ é€Ÿ */
.gpu-optimized {
  will-change: transform, opacity !important;
  transform: translateZ(0) !important;
}

/* ä¸ºé¢‘ç¹å˜åŒ–çš„å…ƒç´ ä¼˜åŒ– */
.message-list,
.chat-list,
.input-container,
.modal-backdrop {
  will-change: auto !important;
}

/* ============== ç¦ç”¨è£…é¥°æ€§åŠ¨æ•ˆ ============== */

/* ç§»é™¤æ‰€æœ‰è£…é¥°æ€§çš„è„‰ææ•ˆæœ */
.animate-pulse-glow,
.animate-sparkle,
.animate-shimmer-bg,
.pulse-glow,
.sparkle,
.shimmer-bg {
  animation: none !important;
}

/* ç§»é™¤å½©è™¹è‰²å½©åŠ¨æ•ˆ */
.gradient-animation,
.color-cycle,
.rainbow-text {
  animation: none !important;
  background: hsl(var(--text-primary)) !important;
  color: hsl(var(--text-primary)) !important;
}

/* ç§»é™¤è¿‡äºèŠ±å“¨çš„è¿‡æ¸¡æ•ˆæœ */
.fancy-transition,
.wobble,
.shake,
.rubber-band,
.flip {
  animation: none !important;
  transform: none !important;
}

/* ============== å“åº”å¼åŠ¨æ•ˆæ§åˆ¶ ============== */

/* ç§»åŠ¨ç«¯ç®€åŒ–åŠ¨æ•ˆ */
@media (max-width: 768px) {
  .message-appear,
  .page-transition-enter-active,
  .page-transition-leave-active {
    animation-duration: 0.2s !important;
  }

  .hover-lift:hover,
  .hover-highlight:hover,
  .hover-border:hover {
    transition-duration: 0.1s !important;
  }
}

/* ä½æ€§èƒ½è®¾å¤‡ä¼˜åŒ– */
@media (prefers-reduced-motion: reduce) {
  /* å®Œå…¨ç¦ç”¨æ‰€æœ‰åŠ¨æ•ˆ */
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* åªä¿ç•™å¿…è¦çš„çŠ¶æ€å˜åŒ– */
  .focus-ring:focus,
  .focus-ring:focus-visible {
    transition: none !important;
  }
}

/* é«˜å¯¹æ¯”åº¦æ¨¡å¼ä¸‹ç®€åŒ–åŠ¨æ•ˆ */
@media (prefers-contrast: high) {
  .feedback-success,
  .feedback-error,
  .feedback-warning {
    animation: none !important;
    border: 2px solid var(--feedback-color) !important;
  }
}

/* ============== æ™ºèƒ½åŠ¨æ•ˆå¯ç”¨ ============== */

/* åªåœ¨ç”¨æˆ·äº¤äº’æ—¶å¯ç”¨åŠ¨æ•ˆ */
.interactive-element {
  transition: none !important;
}

.interactive-element:hover,
.interactive-element:focus,
.interactive-element:active {
  transition: all 0.2s ease !important;
}

/* åŸºäºç”¨æˆ·åå¥½çš„åŠ¨æ•ˆæ§åˆ¶ */
@media (prefers-reduced-motion: no-preference) {
  .optional-animation {
    transition: all 0.3s ease !important;
  }
}

/* ============== å†…å®¹ç›¸å…³åŠ¨æ•ˆä¿ç•™ ============== */

/* æ‰“å­—æœºæ•ˆæœï¼ˆå†…å®¹å±•ç¤ºéœ€è¦ï¼‰ */
.typewriter {
  animation: typewriter 2s steps(40, end) !important;
}

@keyframes typewriter {
  from {
    width: 0;
  }
  to {
    width: 100%;
  }
}

/* è¿›åº¦æ¡åŠ¨æ•ˆï¼ˆåŠŸèƒ½å¿…éœ€ï¼‰ */
.progress-bar {
  transition: width 0.3s ease !important;
}

.progress-indeterminate {
  animation: progressIndeterminate 2s linear infinite !important;
}

@keyframes progressIndeterminate {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

/* ============== è°ƒè¯•å’Œå¼€å‘è¾…åŠ© ============== */

/* å¼€å‘ç¯å¢ƒä¸­æ˜¾ç¤ºæ— åŠ¨æ•ˆå…ƒç´  */
.development .no-animation {
  outline: 1px dashed orange !important;
  outline-offset: 2px !important;
}

/* æ€§èƒ½ç›‘æ§ç±» */
.animation-heavy {
  /* æ ‡è®°åŠ¨æ•ˆå¯†é›†çš„å…ƒç´ ä¾›è°ƒè¯• */
  position: relative;
}

.animation-heavy::after {
  content: 'ğŸ­' !important;
  position: absolute !important;
  top: 0 !important;
  right: 0 !important;
  font-size: 12px !important;
  opacity: 0.3 !important;
  pointer-events: none !important;
}
